<?/*Admin Datenbank Lernmedien*//* verbinden mit db */		$db = mysql_connect("localhost","ruediheimlicher","RivChuv4");	/* nun ist der zugang zum db-server in der variable $db gespeichert */	mysql_set_charset('utf8',$db);	/* hier wird nun die eigentliche db ausgewählt */	mysql_select_db("ruediheimlicher_lernmedien", $db); ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="de"><head>  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Lernmedien Admin</title> <link href="lernmedien.css" rel="stylesheet" type="text/css" /></head><body class="liste">	<div><h1 class="lernmedien">Lernmedien</h1></div>	<h2 class="lernmedien">Admin</h2>				<?$sent='no';$zeilenname=0;#$db->set_charset("utf8"); /* sql-abfrage schicken */$result_medien = mysql_query("SELECT * FROM lernmedien", $db);/* resultat in einer schleife auslesen */#print '<table width="759" border="1">';#while ($medien = mysql_fetch_array($result_medien) ){	#$x=$medien['name'];	#print '<p>Das ist ein Eintrag. Er ist: '. $x.' Punkt</p>';}# neuer Datensatz#print '<h2 class="lernmedien">neuer Datensatz</h2>';{	/*print '<form action="adminconfirm.php" method="post">';$neuerdatensatzstring = '<h1 style="margin-left:40px">Daten</h1>';$neuerdatensatzstring .= '<p class="nameneingabe">Name:<br><input size="40" maxlength="40" name="neuername"></p>';$neuerdatensatzstring .= '<p class="nameneingabe">Art:<br><input size="40" maxlength="40" name="neueart"></p>';$neuerdatensatzstring .= '<p class="nameneingabe">Stufe:<br><input size="40" maxlength="40" name="neuestufe"></p>';$neuerdatensatzstring .= '<p class="nameneingabe">Gruppe:<br><input size="40" maxlength="40" name="neuegruppe"></p>';$neuerdatensatzstring .= '<p class="nameneingabe">Preis:<br><input size="40" maxlength="40" name="neuerpreis"></p>';$neuerdatensatzstring .= '<p class="nameneingabe">Beschreibung:<br><textarea rows="5" cols="45" name="neuebeschreibung"></textarea></p>';#print $neuerdatensatzstring;print '<input type="hidden" name="task" value ="new">';print '<br><p class="nameneingabe" ><input type="submit" name="speichern" value="neuen Datensatz speichern"></p>';print '</form>';*/}#$index=0;#mysql_data_seek($result_medien,$index);// Tableheader#$tableheaderstring  = '<th class="text" width="60">Name</th>';#$tableheaderstring  = '<th class="text breite60">Name</th>';#zu lerntest.pl#print '<form action="/cgi-bin/lerntest.pl" method="post" accept-charset="utf-8">';# Datensatz ändern$sent='no';$zeilenid = $_POST['edit'];$editid=$zeilenid[0];$editname=$zeilenid[1];$nn=$editname;$sent = $_POST['sent'];	#print 'sent: '.$sent.'<br>';		if ($sent == 'yes') {	if ( isset($_POST['edit']))	{		if (isset($_POST['changeradio']))		{			$changeradio = $_POST['changeradio'];				#print 'changeradio: '.$changeradio.'<br>';			#print 'editid: '.$editid.'<br>';				$zeilenidstring = implode(', ',$zeilenid);			#print 'zeilenid[0]: *'.$zeilenid[0].'*  zeilenidstring: '.$zeilenidstring.' <br>';			$index=0;			mysql_data_seek($result_medien,$index);			$zeile= mysql_fetch_assoc($result_medien);						$result_idzeile = mysql_query("SELECT * FROM lernmedien WHERE id = $editid", $db);						$zeilenarray = mysql_fetch_row($result_idzeile);						if ($changeradio == 'change')			{				print 'CHANGE<br>';				$changename=$zeilenarray[1];				#$changename=htmlentities($zeilenarray[1]);				$changebeschreibung=$zeilenarray[2];				$changeart=$zeilenarray[3];				$changegruppe=$zeilenarray[5];				$changepreis=$zeilenarray[6];				$changestufe=htmlentities($zeilenarray[7]);												print '<form action="adminconfirm.php" method="post">';				$changedatensatzstring = '<h1 style="margin-left:40px">Daten</h1>';				#$changedatensatzstring .= '<p class="nameneingabe">Name:<br><input size="40" maxlength="40" name="neuername" value =Hans"></p>';				$changedatensatzstring .= '<p class="nameneingabe">Name:<br><input size="40" maxlength="40" name="changename" value ="'.$changename.'"></p>';				$changedatensatzstring .= '<p class="nameneingabe">Art:<br><input size="40" maxlength="40" name="changeart" value ="'.$changeart.'"></p>';				$changedatensatzstring .= '<p class="nameneingabe">Stufe:<br><input size="40" maxlength="40" name="changestufe" value ="'.$changestufe.'"></p>';				$changedatensatzstring .= '<p class="nameneingabe">Gruppe:<br><input size="40" maxlength="40" name="changegruppe" value ="'.$changegruppe.'"></p>';				$changedatensatzstring .= '<p class="nameneingabe">Preis:<br><input size="40" maxlength="40" name="changepreis" value ="'.$changepreis.'"></p>';				$changedatensatzstring .= '<p class="nameneingabe">Beschreibung:<br><textarea rows="5" cols="45" name="changebeschreibung" <textarea>'.$changebeschreibung.'</textarea></textarea></p>';				print '<input type="hidden" name="index" value ="'.$editid.'">';				print '<input type="hidden" name="task" value ="change">';				print $changedatensatzstring;													print '<br><p class="nameneingabe" ><input type="submit" name="speichern" value="Datensatz neu speichern"></p>';				print '</form><br>';							} # end if change					if ($changeradio == 'delete')			{ 	# delete				print '>DELETE<br>';				print '<form action="adminconfirm.php" method="post">';				$deleteid=$zeilenid[0];							$deletename=$zeilenarray[1];				print '<input type="hidden" name="name" value ="'.$deletename.'">';				print '<input type="hidden" name="index" value ="'.$editid.'">';				print '<input type="hidden" name="task" value ="delete">';				# <h2 class="lernmedien">Fehler im neuen Datensatz</h2>				print '<br><p class="nameneingabe" ><h2 class="lernmedien"> Datensatz <strong>*'.$deletename.'*</strong> wirklich löschen?</h2><input type="submit" name="speichern"  value="Datensatz löschen"></p>';				print '</form>';				print '<form action=""  method="post">';				print '<input type="hidden" name="task" value ="new">';				print '<input type="hidden" name="sent" value ="no">';								print '<input type="submit" name="speichern"  value="Abbrechen"></form>';				#print '<input type="reset" name="speichern"  value="Abbrechen"></p><br>';													}# end if delete				}		else		{			print 'kein changeradio: <br>';		}		} 	else	{		print '<p class = "liste">kein Auftrag</p><br>';			}}else if ($sent == 'err') # falsche Eingabe, Felder wieder laden{	print '<h2 class="lernmedien">Fehler im neuen Datensatz</h2>';						print 'ERR<br>';				/*				$errname=$zeilenarray[1];				#$changename=htmlentities($zeilenarray[1]);				$errbeschreibung=$zeilenarray[2];				$errart=$zeilenarray[3];				$errgruppe=$zeilenarray[5];				$errpreis=$zeilenarray[6];				$errstufe=htmlentities($zeilenarray[7]);				*/				$errname = $_POST['name'];				$errbeschreibung = $_POST['beschreibung'];				$errart = $_POST['art'];				$errgruppe = $_POST['gruppe'];				$errpreis = $_POST['preis'];				$errstufe = $_POST['stufe'];									print '<form action="adminconfirm.php" method="post">';				$errdatensatzstring = '<h1 style="margin-left:40px">Daten</h1>';				#$changedatensatzstring .= '<p class="nameneingabe">Name:<br><input size="40" maxlength="40" name="neuername" value =Hans"></p>';				$errdatensatzstring .= '<p class="nameneingabe">Name:<br><input size="40" maxlength="40" name="neuername" value ="'.$errname.'"></p>';				$errdatensatzstring .= '<p class="nameneingabe">Art:<br><input size="40" maxlength="40" name="neueart" value ="'.$errart.'"></p>';				$errdatensatzstring .= '<p class="nameneingabe">Stufe:<br><input size="40" maxlength="40" name="neuestufe" value ="'.$errstufe.'"></p>';				$errdatensatzstring .= '<p class="nameneingabe">Gruppe:<br><input size="40" maxlength="40" name="neuegruppe" value ="'.$errgruppe.'"></p>';				$errdatensatzstring .= '<p class="nameneingabe">Preis:<br><input size="40" maxlength="40" name="neuerpreis" value ="'.$errpreis.'"></p>';				$errdatensatzstring .= '<p class="nameneingabe">Beschreibung:<br><textarea rows="5" cols="45" name="neuebeschreibung" <textarea>'.$errbeschreibung.'</textarea></textarea></p>';				#print '<input type="hidden" name="index" value ="'.$editid.'">';				print '<input type="hidden" name="task" value ="new">';				print $errdatensatzstring;				print '<br><p class="nameneingabe" ><input type="submit" name="speichern" value="Datensatz neu speichern"></p>';				print '</form><br>';}else{	# neuer Datensatz	print '<h2 class="lernmedien">neuer Datensatz</h2>';	print '<form action="adminconfirm.php" method="post">';	$neuerdatensatzstring = '<h1 style="margin-left:40px">Daten</h1>';	$neuerdatensatzstring .= '<p class="nameneingabe">Name:<br><input size="40" maxlength="40" name="neuername"></p>';	$neuerdatensatzstring .= '<p class="nameneingabe">Art:<br><input size="40" maxlength="40" name="neueart"></p>';	$neuerdatensatzstring .= '<p class="nameneingabe">Stufe:<br><input size="40" maxlength="40" name="neuestufe"></p>';	$neuerdatensatzstring .= '<p class="nameneingabe">Gruppe:<br><input size="40" maxlength="40" name="neuegruppe"></p>';	$neuerdatensatzstring .= '<p class="nameneingabe">Preis:<br><input size="40" maxlength="40" name="neuerpreis"></p>';	$neuerdatensatzstring .= '<p class="nameneingabe">Beschreibung:<br><textarea rows="5" cols="45" name="neuebeschreibung"></textarea></p>';	print $neuerdatensatzstring;	print '<input type="hidden" name="task" value ="new">';	print '<br><p class="nameneingabe" ><input type="submit" name="speichern" value="neuen Datensatz speichern"></p>';	print '</form><br>';	#print 'kein sent<br>';}#print_r($zeilenname);print '<h2 class="lernmedien">Liste der Lernmedien</h2>';// Tableheader#$tableheaderstring  = '<th class="text" width="60">Name</th>';#$tableheaderstring  = '<th class="text breite60">Name</th>';$tableheaderstring  = '<th class="text breite150">Name</th>';$tableheaderstring .= '<th class="text ">Beschreibung</th>';#$tableheaderstring .= '<th class="icon">Bilder</th>';$tableheaderstring .= '<th class="text breite80" >Art</th>';#$tableheaderstring .= '<th class="text breite60 zentriert" ><p class="tableheader">Stufe</p></th>';$tableheaderstring .= '<th class="text breite60 zentriert" >Stufe</th>';$tableheaderstring .= '<th class="text breite60 " >Gruppe</th>';$tableheaderstring .= '<th class="text breite40 zentriert" >Preis</th>';#$tableheaderstring .= '<th width="50" align="center" ><p class="tableheader">Icon</p></th>';$tableheaderstring .= '<th class="text breite30 zentriert" >edit</th>';$tableheaderstring .= '	</tr>';print '<table class="left40">';print '<tr >';print $tableheaderstring;print '<form action="" method="post">';#print '<form action="/cgi-bin/lerntest.pl" method="post" accept-charset="UTF8">';$zeile=0;while ($medien = mysql_fetch_array($result_medien) ){	print '<tr>';	//print '<td align="center">'.'<input type = "hidden" name= ' . $medien['id'] . '>';	$ordnernummer=sprintf("%03d",$medien['id']);	$bildnummer=$ordnernummer."0010";	$bildlink = "Bilder/".$ordnernummer."/".$ordnernummer."0010".".jpg";	print '<td class="listetabellentext">' . $medien['name'] . '</td>';	print '<td class="listetabellentext">' . $medien['beschreibung'] . '</td>';	#print '<td class="listetabellenicon"><img class="icon" src='. $bildlink .' alt="Icon" ></td>';	print '<td class="listetabellentext">' . $medien['art'] . '</td>';	print '<td class="listetabellentext">' . $medien['stufe'] . '</td>';	print '<td class="listetabellentext">' . $medien['gruppe'] . '</td>';	print '<td class="listetabellenzahl">'. $medien['preis'] . '</td>';		print '<td align="center">'.'<input type="checkbox" name="edit[]" method="post" value='. $medien['id'].' >'. '</td>';	print '	</tr>';		print '<input type="hidden" name=index[] value ='.$medien['id'].'>';	print '<input type="hidden" name=name[] value ="'.$medien['name'].'">';	print '<input type="hidden" name=preis[] value ='.$medien['preis'].'>';$zeile++;}print '<input type="hidden" name="sent" value="yes">';print '</table>';# einführung Radiobutton# Datensatz ändern. Bringt die Daten in die Eingabefelderprint '<p class="nameneingabe" ><input type="radio" name="changeradio" method="post" value="change" checked >Datensatz ändern ';# Datensatz löschenprint '<input type="radio" name="changeradio" method="post" value="delete" >Datensatz löschen</p>';#print '<input type="hidden" name="changeoption" value="changeradio"><br>';# end Radiobutton#print '<input type="hidden" name=index[] value ='.$medien['id'].'>';print '<p class="nameneingabe" ><input type="submit" name="change" value="Weiterfahren"></p></form>';print '<br><form action="index.php" ><p class="nameneingabe"><input type="submit" value="zurück zur Startseite" name="textfile"></p></form>';mysql_close($db);?></body></html>