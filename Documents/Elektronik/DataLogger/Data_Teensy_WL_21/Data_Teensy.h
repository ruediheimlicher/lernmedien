//
//  Data_Teensy.h
//  Data_Teensy
//
//  Created by Ruedi Heimlicher on 07.12.2017.
//


#ifndef Data_Teensy_h
#define Data_Teensy_h

// includes mmc
#include "chan_n/mmc_avr_spi.c"
#include "chan_n/ff.c"
#include "chan_n/diskio.c"

#include "wireless.c"
#include "nRF24L01.h"


#define CPU_PRESCALE(n)   (CLKPR = 0x80, CLKPR = (n))

#define VREF 250 // gemessene Vref


#define LOOPDELAY 5

#define SERVOMAX  4400
#define SERVOMIN  1400


#define USB_DATENBREITE USB_PACKETSIZE

#define CODE_OFFSET  4
#define ROTARY_OFFSET  10


//  KTY PROGMEM
// Aufruf: pgm_read_word(&KTY[xy])
#define KTY_OFFSET   32             // Offset, Start bei bei -32 Â°C
#define ADC_OFFSET   370            // Startwert der ADC-Messung
#define KTY_FAKTOR   96             // 0x60, Multiplikator

// lookup-Tabelle KTY84
const uint16_t KTY[] PROGMEM =
{
   0x0,   0x17E,   0x328,   0x4B6,   0x651,   0x7D2,   0x961,   0xAD8,
   0xC5C,   0xDCA,   0xF45,   0x10AB,   0x121F,   0x137E,   0x14DA,   0x1645,
   0x179B,   0x1900,   0x1A52,   0x1BB3,   0x1D01,   0x1E5D,   0x1FA8,   0x2101,
   0x2249,   0x239F,   0x24E4,   0x2638,   0x277B,   0x28CD,   0x2A0E,   0x2B5F,
   0x2C9E,   0x2DEE,   0x2F2C,   0x307B,   0x31B9,   0x3307,   0x3444,   0x3582,
   0x36CF,   0x380C,   0x395A,   0x3A98,   0x3BE5,   0x3D23,   0x3E72,   0x3FB0,
   0x4100,   0x423F,   0x4390,   0x44D0,   0x4622,   0x4764,   0x48B7,   0x49FB,
   0x4B4F,   0x4C95,   0x4DEC,   0x4F33,   0x508C,   0x51D5,   0x5331,   0x547D,
   0x55CA,   0x5729,   0x5879,   0x59DB,   0x5B2E,   0x5C93,   0x5DE9,   0x5F52,
   0x60AB,   0x6217,   0x6374,   0x64E4,   0x6644,   0x67B9,   0x691D,   0x6A96,
   0x6BFF,   0x6D7C,   0x6EE9,   0x706B,   0x71DD,   0x7365,   0x74DC,   0x7669,
   0x77E5,   0x7964,   0x7AFA,   0x7C7F,   0x7E1A,   0x7FA5,   0x8147,   0x82D9,
   0x8482,   0x861A,   0x87CA,   0x8969,   0x8B21,   0x8CC8,   0x8E88,   0x9037,
   0x91FF,   0x93B6,   0x9587,   0x9747,   0x9922,   0x9AEB,   0x9CCF,   0x9EA2,
   0xA091,   0xA26E,   0xA450,   0xA650,   0xA83D,   0xAA49,   0xAC42,   0xAE5B,
   0xB060,   0xB286,   0xB499,   0xB6CD,   0xB8EE,   0xBB31,   0xBD60,   0xBFB3,
   0xC1F2,   0xC457,   0xC6A6,   0xC91C,   0xCB7E,   0xCE07,   0xD07B,   0xD319,
   0xD5A1,   0xD855,   0xDAF3,   0xDD9B,   0xE072,   0xE333,   0xE624,   0xE8FD,
};


volatile uint16_t    homeADCArray[ADC_BUFSIZE] = {};  // ADC-Werte teensy

volatile uint16_t    ADC_Array[ADC_BUFSIZE] = {};     // ADC-Werte devices




#endif /* Data_Teensy_h */
